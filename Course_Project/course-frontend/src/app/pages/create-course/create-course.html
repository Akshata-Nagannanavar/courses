<div class="container my-4 create-course-container">
  <div class="card shadow-lg border-0">
     <!-- ===== Back Button Top-Left ===== -->
    <button class="btn btn-secondary btn-back" (click)="goBack()">
      <i class="bi bi-arrow-left me-1"></i>Back
    </button>
    <div class="card-body">
      <h2 class="mb-4 text-center text-primary">
        <i class="bi bi-book-half me-2"></i>Create Course
      </h2>

      <form [formGroup]="courseForm" (ngSubmit)="onSubmit()" novalidate class="row g-3">
        <!-- Course Name -->
        <div class="col-12">
          <label class="form-label fw-semibold">
            <i class="bi bi-pencil-square me-1 text-primary"></i> Name
            <span class="text-danger">*</span>
          </label>
          <input
            type="text"
            class="form-control"
            formControlName="name"
            placeholder="Enter course name"
          />
          <div
            class="form-text text-danger"
            *ngIf="courseForm.get('name')?.invalid && courseForm.get('name')?.touched"
          >
            Name is required
          </div>
        </div>

        <!-- Description -->
        <div class="col-12">
          <label class="form-label fw-semibold">
            <i class="bi bi-card-text me-1 text-primary"></i> Description
            <span class="text-danger">*</span>
          </label>
          <textarea
            class="form-control"
            formControlName="description"
            rows="3"
            placeholder="Enter course description"
          ></textarea>
          <div
            class="form-text text-danger"
            *ngIf="courseForm.get('description')?.invalid && courseForm.get('description')?.touched"
          >
            Description is required
          </div>
        </div>

        <!-- Board -->
        <div class="col-12">
          <label class="form-label fw-semibold">
            <i class="bi bi-mortarboard me-1 text-primary"></i> Board
            <span class="text-danger">*</span>
          </label>
          <select class="form-select" formControlName="board">
            <option value="">Select Board</option>
            <option *ngFor="let b of filterBoards" [value]="b">{{ b }}</option>
          </select>
          <div
            class="form-text text-danger"
            *ngIf="courseForm.get('board')?.invalid && courseForm.get('board')?.touched"
          >
            Board is required
          </div>
        </div>
        <!-- ====== Medium (Multi-select Dropdown) ====== -->
<div class="mb-3 position-relative">
  <label class="form-label fw-semibold">
    <i class="bi bi-translate me-2 text-warning"></i>Mediums
  </label>

  <div class="dropdown-multi">
    <div class="form-select" (click)="toggleDropdown('medium', $event)">
      {{ selectedMediums.length ? selectedMediums.join(', ') : 'Select mediums' }}
    </div>
    <ul class="dropdown-menu show" *ngIf="dropdownOpen.medium" (click)="$event.stopPropagation()">
      <li *ngFor="let m of filterMediums">
        <label class="dropdown-item d-flex align-items-center">
          <input
            type="checkbox"
            class="form-check-input me-2"
            [value]="m"
            [checked]="selectedMediums.includes(m)"
            (change)="onCheckboxChange($event, 'medium')"
          />
          {{ m }}
        </label>
      </li>
    </ul>
  </div>
</div>

<!-- ====== Grades (Multi-select Dropdown) ====== -->
<div class="mb-3 position-relative">
  <label class="form-label fw-semibold">
    <i class="bi bi-mortarboard me-2 text-danger"></i>Grades
  </label>

  <div class="dropdown-multi">
    <div class="form-select" (click)="toggleDropdown('grade', $event)">
      {{ selectedGrades.length ? selectedGrades.join(', ') : 'Select grades' }}
    </div>
    <ul class="dropdown-menu show" *ngIf="dropdownOpen.grade" (click)="$event.stopPropagation()">
      <li *ngFor="let g of filterGrades">
        <label class="dropdown-item d-flex align-items-center">
          <input
            type="checkbox"
            class="form-check-input me-2"
            [value]="g"
            [checked]="selectedGrades.includes(g)"
            (change)="onCheckboxChange($event, 'grade')"
          />
          {{ g }}
        </label>
      </li>
    </ul>
  </div>
</div>

<!-- ====== Subjects (Multi-select Dropdown) ====== -->
<div class="mb-3 position-relative">
  <label class="form-label fw-semibold">
    <i class="bi bi-book-half me-2 text-primary"></i>Subjects
  </label>

  <div class="dropdown-multi">
    <div class="form-select" (click)="toggleDropdown('subject', $event)">
      {{ selectedSubjects.length ? selectedSubjects.join(', ') : 'Select subjects' }}
    </div>
    <ul class="dropdown-menu show" *ngIf="dropdownOpen.subject" (click)="$event.stopPropagation()">
      <li *ngFor="let s of filterSubjects">
        <label class="dropdown-item d-flex align-items-center">
          <input
            type="checkbox"
            class="form-check-input me-2"
            [value]="s"
            [checked]="selectedSubjects.includes(s)"
            (change)="onCheckboxChange($event, 'subject')"
          />
          {{ s }}
        </label>
      </li>
    </ul>
  </div>
</div>



        <!-- Submit -->
        <div class="col-12 text-center mt-3">
          <button
            type="submit"
            class="btn btn-primary px-4 py-2 fw-semibold"
            [disabled]="courseForm.invalid"
          >
            <i class="bi bi-save me-1"></i> Create Course
          </button>
        </div>
      </form>

      <!-- Add Unit -->
      <div class="text-center mt-4">
        <button class="btn btn-success px-4 py-2 fw-semibold unit-btn" (click)="goToCreateUnit()">
          <i class="bi bi-plus-circle me-1"></i> Add Unit
        </button>
      </div>
    </div>
  </div>
</div>
